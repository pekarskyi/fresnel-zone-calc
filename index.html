<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è</title>
</head>
<body>
    <div class="calculator">
        <div class="header">
            <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è</h1>
            <p>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–∞–¥—ñ—É—Å–∞ –ø–µ—Ä—à–æ—ó –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è –¥–ª—è —Ä–∞–¥—ñ–æ–∑–≤'—è–∑–∫—É</p>
        </div>
        
        <div class="input-group">
            <label for="frequency">–ß–∞—Å—Ç–æ—Ç–∞</label>
            <input type="number" id="frequency" step="0.001" min="0.001" placeholder="–í–≤–µ–¥—ñ—Ç—å —á–∞—Å—Ç–æ—Ç—É">
            <select id="frequencyUnit">
                <option value="MHz">–ú–ì—Ü</option>
                <option value="GHz">–ì–ì—Ü</option>
                <option value="Hz">–ì—Ü</option>
                <option value="kHz">–∫–ì—Ü</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="distance">–ó–∞–≥–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å</label>
            <input type="number" id="distance" step="0.1" min="0.1" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤—ñ–¥—Å—Ç–∞–Ω—å">
            <select id="distanceUnit">
                <option value="km">–∫–º</option>
                <option value="m">–º</option>
                <option value="mi">–º–∏–ª—ñ</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="position">–ü–æ–∑–∏—Ü—ñ—è —Ç–æ—á–∫–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É</label>
            <select id="position">
                <option value="center">–¶–µ–Ω—Ç—Ä —Ç—Ä–∞—Å–∏ (50%)</option>
                <option value="custom">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∞ –ø–æ–∑–∏—Ü—ñ—è</option>
            </select>
        </div>
        
        <div class="input-group hidden" id="customPositionGroup">
            <label for="customPosition">–í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ —Ç–æ—á–∫–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É</label>
            <input type="number" id="customPosition" step="0.1" min="0.1" placeholder="–í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ –ø–µ—Ä—à–æ—ó –∞–Ω—Ç–µ–Ω–∏">
            <div class="unit-label" id="customPositionUnit">–∫–º</div>
        </div>
        
        <button class="calculate-btn" onclick="calculateFresnel()">
            üîÑ –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–æ–Ω—É –§—Ä–µ–Ω–µ–ª—è
        </button>
        
        <div class="results hidden" id="results">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É</h3>
            <div class="result-item">
                <span class="result-label">100% –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è:</span>
                <span class="result-value" id="result100"></span>
            </div>
            <div class="result-item">
                <span class="result-label">80% –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è:</span>
                <span class="result-value" id="result80"></span>
            </div>
            <div class="result-item">
                <span class="result-label">60% –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è:</span>
                <span class="result-value" id="result60"></span>
            </div>
            
            <div class="formula-info">
                <strong>üìê –§–æ—Ä–º—É–ª–∞:</strong> R = ‚àö(Œª √ó d‚ÇÅ √ó d‚ÇÇ / D)<br>
                –¥–µ Œª - –¥–æ–≤–∂–∏–Ω–∞ —Ö–≤–∏–ª—ñ, d‚ÇÅ —ñ d‚ÇÇ - –≤—ñ–¥—Å—Ç–∞–Ω—ñ –¥–æ —Ç–æ—á–∫–∏, D - –∑–∞–≥–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å<br>
                <strong>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:</strong> –î–ª—è –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –∑–≤'—è–∑–∫—É —Å–ª—ñ–¥ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 60% –≤—ñ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É –≤—ñ–¥ –ø–µ—Ä—à–æ—ó –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è
            </div>
        </div>
        
        <div class="visualization hidden" id="visualization">
            <h4>üìä –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è</h4>
            <canvas id="fresnelCanvas" width="400" height="300"></canvas>
            
            <div class="controls">
                <button class="toggle-btn active" id="show100" onclick="toggleZone('100')">100%</button>
                <button class="toggle-btn active" id="show80" onclick="toggleZone('80')">80%</button>
                <button class="toggle-btn active" id="show60" onclick="toggleZone('60')">60%</button>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(255, 99, 132, 0.3); border: 2px solid #ff6384;"></div>
                    <span>100% –∑–æ–Ω–∞</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(255, 206, 86, 0.3); border: 2px solid #ffce56;"></div>
                    <span>80% –∑–æ–Ω–∞</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: rgba(75, 192, 192, 0.3); border: 2px solid #4bc0c0;"></div>
                    <span>60% –∑–æ–Ω–∞</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #667eea;"></div>
                    <span>–ê–Ω—Ç–µ–Ω–∏</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó
        let canvas, ctx;
        let showZones = { '100': true, '80': true, '60': true };
        let currentResults = null;
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è canvas
        function initCanvas() {
            canvas = document.getElementById('fresnelCanvas');
            if (!canvas) return;
            
            ctx = canvas.getContext('2d');
            
            // –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É
            canvas.width = 450;
            canvas.height = 300;
            canvas.style.width = '100%';
            canvas.style.height = 'auto';
        }
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        document.addEventListener('DOMContentLoaded', initCanvas);
        
        // –û–±—Ä–æ–±–∫–∞ –∑–º—ñ–Ω–∏ –ø–æ–∑–∏—Ü—ñ—ó
        document.getElementById('position').addEventListener('change', function() {
            const customGroup = document.getElementById('customPositionGroup');
            if (this.value === 'custom') {
                customGroup.classList.remove('hidden');
            } else {
                customGroup.classList.add('hidden');
            }
        });
        
        // –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –æ–¥–∏–Ω–∏—Ü—å –≤—ñ–¥—Å—Ç–∞–Ω—ñ
        document.getElementById('distanceUnit').addEventListener('change', function() {
            document.getElementById('customPositionUnit').textContent = this.value;
        });
        
        function toggleZone(zone) {
            showZones[zone] = !showZones[zone];
            const btn = document.getElementById('show' + zone);
            btn.classList.toggle('active');
            if (currentResults) drawVisualization();
        }
        
        function drawVisualization() {
            if (!canvas || !ctx || !currentResults) return;
            
            const width = canvas.width;
            const height = canvas.height;
            
            // –û—á–∏—â–µ–Ω–Ω—è canvas
            ctx.clearRect(0, 0, width, height);
            
            // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
            const margin = 40;
            const drawWidth = width - 2 * margin;
            const drawHeight = height - 2 * margin;
            
            // –ü–æ–∑–∏—Ü—ñ—ó –∞–Ω—Ç–µ–Ω
            const antenna1X = margin;
            const antenna2X = width - margin;
            const centerY = height / 2;
            
            // –ü–æ–∑–∏—Ü—ñ—è —Ç–æ—á–∫–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É
            const pointX = antenna1X + (currentResults.d1 / currentResults.totalDistance) * drawWidth;
            
            // –ú–∞—Å—à—Ç–∞–± –¥–ª—è —Ä–∞–¥—ñ—É—Å—ñ–≤ (–æ–±–º–µ–∂—É—î–º–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –≤–∏—Å–æ—Ç—É)
            const maxRadius = currentResults.radius100;
            const maxDisplayRadius = Math.min(drawHeight / 3, 80); // –æ–±–º–µ–∂–µ–Ω–Ω—è –≤–∏—Å–æ—Ç–∏
            const radiusScale = maxDisplayRadius / maxRadius;
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è –∑–æ–Ω –§—Ä–µ–Ω–µ–ª—è (–≤—ñ–¥ –Ω–∞–π–±—ñ–ª—å—à–æ—ó –¥–æ –Ω–∞–π–º–µ–Ω—à–æ—ó)
            if (showZones['100']) {
                drawFresnelEllipse(antenna1X, antenna2X, centerY, currentResults.radius100 * radiusScale, 'rgba(255, 99, 132, 0.2)', '#ff6384');
            }
            if (showZones['80']) {
                drawFresnelEllipse(antenna1X, antenna2X, centerY, currentResults.radius80 * radiusScale, 'rgba(255, 206, 86, 0.3)', '#ffce56');
            }
            if (showZones['60']) {
                drawFresnelEllipse(antenna1X, antenna2X, centerY, currentResults.radius60 * radiusScale, 'rgba(75, 192, 192, 0.4)', '#4bc0c0');
            }
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è –ª—ñ–Ω—ñ—ó –∑–≤'—è–∑–∫—É
            ctx.strokeStyle = '#4a5568';
            ctx.lineWidth = 2;
            ctx.setLineDash([8, 4]);
            ctx.beginPath();
            ctx.moveTo(antenna1X, centerY);
            ctx.lineTo(antenna2X, centerY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è –∞–Ω—Ç–µ–Ω
            drawAntenna(antenna1X, centerY, 'A1');
            drawAntenna(antenna2X, centerY, 'A2');
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è —Ç–æ—á–∫–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É
            ctx.fillStyle = '#e53e3e';
            ctx.beginPath();
            ctx.arc(pointX, centerY, 4, 0, Math.PI * 2);
            ctx.fill();
            
            // –ü—ñ–¥–ø–∏—Å–∏
            ctx.fillStyle = '#2d3748';
            ctx.font = 'bold 11px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('–¢–æ—á–∫–∞', pointX, centerY - 12);
            
            // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—ñ–¥—Å—Ç–∞–Ω–µ–π
            ctx.font = '10px Arial';
            ctx.fillStyle = '#4a5568';
            const d1km = (currentResults.d1 / 1000).toFixed(1);
            const d2km = (currentResults.d2 / 1000).toFixed(1);
            ctx.fillText(`${d1km} –∫–º`, antenna1X + (pointX - antenna1X) / 2, centerY + 25);
            ctx.fillText(`${d2km} –∫–º`, pointX + (antenna2X - pointX) / 2, centerY + 25);
        }
        
        function drawFresnelEllipse(x1, x2, centerY, radius, fillColor, strokeColor) {
            const centerX = (x1 + x2) / 2;
            const a = (x2 - x1) / 2; // –ø—ñ–≤–æ—Å—å –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ
            const b = radius; // –ø—ñ–≤–æ—Å—å –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ
            
            ctx.fillStyle = fillColor;
            ctx.strokeStyle = strokeColor;
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, a, b, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.stroke();
        }
        
        function drawAntenna(x, y, label) {
            // –ú–∞—á—Ç–∞ –∞–Ω—Ç–µ–Ω–∏
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(x, y - 20);
            ctx.lineTo(x, y + 20);
            ctx.stroke();
            
            // –û—Å–Ω–æ–≤–∞ –∞–Ω—Ç–µ–Ω–∏
            ctx.fillStyle = '#667eea';
            ctx.fillRect(x - 8, y + 15, 16, 8);
            
            // –ê–Ω—Ç–µ–Ω–∞ (—Ç—Ä–∏–∫—É—Ç–Ω–∏–∫)
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.moveTo(x, y - 20);
            ctx.lineTo(x - 6, y - 10);
            ctx.lineTo(x + 6, y - 10);
            ctx.closePath();
            ctx.fill();
            
            // –ü—ñ–¥–ø–∏—Å
            ctx.fillStyle = '#4a5568';
            ctx.font = '11px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(label, x, y + 35);
        }
        
        function calculateFresnel() {
            // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å
            const frequency = parseFloat(document.getElementById('frequency').value);
            const frequencyUnit = document.getElementById('frequencyUnit').value;
            const distance = parseFloat(document.getElementById('distance').value);
            const distanceUnit = document.getElementById('distanceUnit').value;
            const position = document.getElementById('position').value;
            const customPosition = parseFloat(document.getElementById('customPosition').value);
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–≤–µ–¥–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö
            if (!frequency || frequency <= 0) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É —á–∞—Å—Ç–æ—Ç—É');
                return;
            }
            
            if (!distance || distance <= 0) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å');
                return;
            }
            
            if (position === 'custom' && (!customPosition || customPosition <= 0 || customPosition >= distance)) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –ø–æ–∑–∏—Ü—ñ—é —Ç–æ—á–∫–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É (–º–µ–Ω—à–µ –∑–∞–≥–∞–ª—å–Ω–æ—ó –≤—ñ–¥—Å—Ç–∞–Ω—ñ)');
                return;
            }
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —á–∞—Å—Ç–æ—Ç–∏ –≤ –ì—Ü
            let frequencyHz = frequency;
            switch (frequencyUnit) {
                case 'kHz': frequencyHz *= 1000; break;
                case 'MHz': frequencyHz *= 1000000; break;
                case 'GHz': frequencyHz *= 1000000000; break;
            }
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤—ñ–¥—Å—Ç–∞–Ω—ñ –≤ –º–µ—Ç—Ä–∏
            let distanceM = distance;
            let positionM = position === 'center' ? distance / 2 : customPosition;
            switch (distanceUnit) {
                case 'km': 
                    distanceM *= 1000; 
                    positionM *= 1000;
                    break;
                case 'mi': 
                    distanceM *= 1609.34; 
                    positionM *= 1609.34;
                    break;
            }
            
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ–≤–∂–∏–Ω–∏ —Ö–≤–∏–ª—ñ
            const lightSpeed = 299792458; // –º/—Å
            const wavelength = lightSpeed / frequencyHz;
            
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤—ñ–¥—Å—Ç–∞–Ω–µ–π
            const d1 = positionM;
            const d2 = distanceM - positionM;
            
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–∞–¥—ñ—É—Å–∞ –ø–µ—Ä—à–æ—ó –∑–æ–Ω–∏ –§—Ä–µ–Ω–µ–ª—è
            const fresnelRadius = Math.sqrt((wavelength * d1 * d2) / distanceM);
            
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ 60%, 80% —Ç–∞ 100%
            const radius100 = fresnelRadius;
            const radius80 = fresnelRadius * 0.8;
            const radius60 = fresnelRadius * 0.6;
            
            // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó
            currentResults = {
                radius100: radius100,
                radius80: radius80,
                radius60: radius60,
                d1: d1,
                d2: d2,
                totalDistance: distanceM
            };
            
            // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
            document.getElementById('result100').textContent = `${radius100.toFixed(3)} –º`;
            document.getElementById('result80').textContent = `${radius80.toFixed(3)} –º`;
            document.getElementById('result60').textContent = `${radius60.toFixed(3)} –º`;
            
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('visualization').classList.remove('hidden');
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó
            setTimeout(() => {
                drawVisualization();
            }, 100);
            
            // –ü–ª–∞–≤–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ Enter
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateFresnel();
            }
        });
    </script>
</body>
</html>
